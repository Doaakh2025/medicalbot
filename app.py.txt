import streamlit as st
import requests

st.set_page_config(page_title="Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ", layout="centered")
st.title("ğŸ¤– Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ")
st.markdown("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ø§Ù„ØªÙŠ ØªØ´Ø¹Ø± Ø¨Ù‡Ø§ ÙˆØ³ÙŠØ±Ø¯ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø¨ÙˆØª Ø¨Ù†ØµÙŠØ­Ø© Ø·Ø¨ÙŠØ© Ø£ÙˆÙ„ÙŠØ©.")

user_input = st.text_input("âœï¸ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø¹Ø±Ø§Ø¶ Ù‡Ù†Ø§:")

if st.button("Ø¥Ø±Ø³Ø§Ù„"):
    if user_input.strip() == "":
        st.warning("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø£Ø¹Ø±Ø§Ø¶Ù‹Ø§.")
    else:
        url = "https://udify.app/chat/BXE7UHClh3Liaf7T"
        headers = {
            "Authorization": "Bearer app-MvMNfrvLnaD8mR9eKbP1Q4I1",
            "Content-Type": "application/json"
        }
        payload = {
            "inputs": user_input,
            "response_mode": "blocking"
        }

        with st.spinner("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±..."):
            response = requests.post(url, json=payload, headers=headers)

        if response.status_code == 200:
            result = response.json()
            reply = result.get("answer") or result.get("response") or "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø¯."
            st.success("Ø±Ø¯ Ø§Ù„Ø¨ÙˆØª:")
            st.write(reply)
        else:
            st.error(f"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¨ÙˆØª. Ø±Ù…Ø² Ø§Ù„Ø­Ø§Ù„Ø©: {response.status_code}")
            st.write(response.text)
